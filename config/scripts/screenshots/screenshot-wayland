#!/usr/bin/env bash
set -euo pipefail

DIR="$HOME/pictures/screenshots"
mkdir -p "$DIR"
FILE="$DIR/$(date +%Y-%m-%d_%H-%M-%S).png"

mode="${1:-full}"
saved="${2:-false}"

# wl-copy --type image/png < image.png
case "$mode" in
  full)
    # grimblast --notify copysave screen
    grimblast --notify save screen "$FILE";
  ;;
  window)
    # grimblast --notify copysave active
    grimblast --notify save active "$FILE";
  ;;
  select)
    grimblast --notify save area "$FILE";
    # grimblast --notify copysave area
  ;;
  *) echo "usage: $0 {full|window|select}" >&2; exit 2 ;;
esac

# hyprctl dispatch submap reset

if [[ $saved == false ]]; then
  wl-copy < "$FILE"
fi
