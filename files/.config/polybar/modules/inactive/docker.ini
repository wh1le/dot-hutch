[module/docker]
type = custom/script
interval = 5
; Output: RUNNING/TOTAL (e.g., 3/7). OFF if daemon not reachable. N/A if docker missing.
exec = bash -lc 'command -v docker >/dev/null 2>&1 || { echo N/A; exit 0; }; docker info >/dev/null 2>&1 || { echo OFF; exit 0; }; r=$(docker ps -q | wc -l); a=$(docker ps -aq | wc -l); echo "$r/$a"'

format-prefix = " "
format-prefix-foreground = ${colors.primary}
format-underline = ${colors.primary}
label = %output%
label-foreground = ${colors.foreground}

; Left click: show container table in a new WezTerm
click-left = wezterm start -- bash -lc 'docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}\t{{.Image}}"; read -n1 -s -r -p "Press any key to close"'

; Right click: notify summary
click-right = bash -lc 'notify-send "Docker" "$(docker ps --format "{{.Names}} — {{.Status}}")" || true'
