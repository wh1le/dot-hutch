#!/usr/bin/env bash

if [[ "$1" == "select-pane" ]]; then
  case "$2" in
  -L)
    at_edge=$(/usr/bin/tmux display -p '#{pane_at_left}')
    dir=l
    ;;
  -D)
    at_edge=$(/usr/bin/tmux display -p '#{pane_at_bottom}')
    dir=d
    ;;
  -U)
    at_edge=$(/usr/bin/tmux display -p '#{pane_at_top}')
    dir=u
    ;;
  -R)
    at_edge=$(/usr/bin/tmux display -p '#{pane_at_right}')
    dir=r
    ;;
  *)
    /usr/bin/tmux "$@"
    exit
    ;;
  esac

  if [[ "$at_edge" == "1" ]]; then
    hyprctl dispatch movefocus "$dir" >/dev/null
  else
    /usr/bin/tmux "$@"
  fi
else
  /usr/bin/tmux "$@"
fi
