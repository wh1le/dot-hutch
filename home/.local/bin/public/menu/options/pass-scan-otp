#!/usr/bin/env bash

set -euo pipefail

if pgrep -f 'kitty.*--class '"$KITTY_LAUNCHER_CLASS" >/dev/null; then
  hyprctl dispatch resizeactive 200 100 &>/dev/null
  hyprctl dispatch centerwindow &>/dev/null
  kitty @ --to unix:/tmp/kitty-launcher set-font-size 10
fi

$HOME/.local/bin/public/pass/scan-otp

if pgrep -f 'kitty.*--class '"$KITTY_LAUNCHER_CLASS" >/dev/null; then
  kitty @ --to "unix:$KITTY_LAUNCHER_SOCKET_PATH" close-window
fi
