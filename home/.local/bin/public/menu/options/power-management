#!/usr/bin/env bash

set -euo pipefail

: "${LAUNCHER_SCRIPTS_PATH:=$HOME/.local/bin/public/menu}"
: "${KITTY_LAUNCHER_CLASS:=launcher}"
: "${KITTY_LAUNCHER_SOCKET_PATH:=/tmp/kitty-launcher}"

source "$LAUNCHER_SCRIPTS_PATH/helpers/fzf-with-options"

# ["󰗽  Logout"]="hyprctl dispatch exit"
declare -A actions=(
  ["󰌾  Lock"]="hyprlock"
  ["󰗽  Logout"]="uwsm stop"
  ["󰤄  Suspend"]="systemctl suspend"
  ["󰒲  Hibernate"]="systemctl hibernate"
  ["󰜉  Reboot"]="systemctl reboot"
  ["󰐥  Shutdown"]="systemctl poweroff"
)

choice=$(
  printf '%s\n' "${!actions[@]}" |
    fzf-with-options \
      --prompt="Power » " \
      --no-info
)

[[ -z "$choice" ]] && {
  exit 0
}

exec ${actions[$choice]}
