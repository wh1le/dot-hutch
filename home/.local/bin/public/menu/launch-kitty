#!/usr/bin/env bash

# TODO: Remove after reboot
: "${LAUNCHER_SCRIPTS_PATH:=$HOME/.local/bin/public/menu}"
: "${KITTY_LAUNCHER_SOCKET_PATH:=/tmp/kitty-launcher}"
# TODO: Remove after reboot

source "$LAUNCHER_SCRIPTS_PATH/helpers/spawn-kitty"

run() {
  local output
  if ! output=$("$@" 2>&1); then
    notify-send -u critical "Launcher Error" "$*\n\n$output"
    exit 1
  fi
}

option=${1-}

if [ -z "$option" ]; then
  run spawn-kitty "$LAUNCHER_SCRIPTS_PATH/launch-menu"
else
  run spawn-kitty "$LAUNCHER_SCRIPTS_PATH/options/$option"
fi
