#!/usr/bin/env bash

# Kitty
for socket in /tmp/kitty-*; do
  echo "kitty reloaded"
  [ -S "$socket" ] && kitty @ --to "unix:$socket" set-colors --all ~/.cache/wal/colors-kitty.conf 2>/dev/null
done

# Tmux

echo "tmux reloaded"
tmux source-file ~/.config/tmux/tmux.conf 2>/dev/null || true

# hyprctl keyword debug:watchconfig false

$HOME/.config/wal/postrun/generate-hyprland-border-colors

touch ~/.config/waybar/live-reload
echo "waybar reloaded"

COLORS_FILE="$HOME/.cache/wal/colors-hyprland-borders.conf"

# border_active1=$(grep 'border_active1' "$COLORS_FILE" | cut -d'=' -f2 | xargs)
# border_active2=$(grep 'border_active2' "$COLORS_FILE" | cut -d'=' -f2 | xargs)
# border_inactive=$(grep 'border_inactive' "$COLORS_FILE" | cut -d'=' -f2 | xargs)
#
# border_active1="${border_active1#0xff}"
# border_active2="${border_active2#0xff}"
# border_inactive="${border_inactive#0xff}"

# hyprctl keyword general:col.active_border "0xff${border_active2} 0xff${border_active1} 45deg"
# hyprctl keyword general:col.inactive_border "0xff${border_inactive}"

hyprctl reload
echo "hyprland reloaded"

ln -sf ~/.cache/wal/colors-obsidian.css ~/Obsidian/self-architect/.obsidian/snippets/pywal.css
echo "obsidian reloaded"

# notifications
swaync-client -rs
echo "notifications reloaded"

pywalfox update
echo "firefox reloaded"

qutebrowser --target=auto ':config-source'
echo "qutebrowser reloaded"

touch ~/.config/rmpc/config.ron
echo "rmpc reloaded"
