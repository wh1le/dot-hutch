#!/usr/bin/env bash

hyprctl dispatch workspace 4

launch_exact() {
  # $1: class, $2: cmd, $3: x, $4: y, $5: w, $6: h
  kitty --class "$1" -e "$2" &

  local addr=""
  while [ -z "$addr" ]; do
    sleep 0.1
    addr=$(hyprctl clients -j | jq -r ".[] | select(.class == \"$1\") | .address")
  done

  # 1. Enable pseudotile mode (the standard dispatcher)
  hyprctl dispatch pseudotile "address:$addr"

  # 2. Resize to exact pixels from your JSON
  hyprctl dispatch resizewindowpixel exact "$5 $6,address:$addr"

  # 3. Move to exact position from your JSON
  hyprctl dispatch movewindowpixel exact "$3 $4,address:$addr"
}

# --- Layout based on your JSON ---
# launch_exact "kitty-btop" "btop" 17 54 779 461
# launch_exact "kitty-zsh" "zsh" 804 54 779 274
launch_exact "kitty-cava" "cava" 804 336 779 647
# hyprctl keyword dwindle:force_split 1
# launch_exact "kitty-rmpc" "rmpc" 17 523 386 460
# launch_exact "kitty-viu" "viu" 411 523 385 460

# 6th App: Adjust coordinates as needed
# launch_exact "kitty-six" "zsh" 804 990 779 100
