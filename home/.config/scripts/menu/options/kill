#!/usr/bin/env bash

set -euo pipefail

hyprctl dispatch resizeactive 100 200
hyprctl dispatch centerwindow
kitty @ --to unix:/tmp/kitty-launcher set-font-size 11

# Build a list of processes and let fzf pick one
choice=$(
  ps -eo pid,user,comm --sort=-pid \
  | awk 'NR>1 {printf "%-7s %-12s %s\n", $1, $2, $3}' \
  | fzf --prompt='Kill> ' --header='Select process to kill'
) || exit 0   # ESC in fzf

# First column is PID
pid=$(awk '{print $1}' <<<"$choice")

[ -n "${pid:-}" ] || exit 0

# Kill with sudo
sudo kill "$pid"
