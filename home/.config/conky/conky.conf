conky.config = {
  out_to_x = false,
  out_to_wayland = true,

  own_window = true,
  own_window_type = 'normal',
  own_window_hints = 'below',
  own_window_transparent = false,
  own_window_argb_visual = true,
  own_window_argb_value = 255,
  own_window_colour = 'white',
  own_window_class = 'conky',

  alignment = 'top_right',
  gap_x = 30,
  gap_y = 50,
  update_interval = 2.0,
  double_buffer = true,

  use_xft = true,
  font = 'Iosevka Nerd Font:size=10',
  default_color = 'black',
  color1 = '#666666',
  color2 = 'black',
  color3 = '#888888',

  draw_shades = false,
  draw_outline = false,
  draw_borders = false,
  draw_graph_borders = true,

  default_bar_width = 180,
  default_bar_height = 6,
  default_graph_width = 180,
  default_graph_height = 25,

  minimum_width = 220,
  maximum_width = 220,
  border_inner_margin = 12,
}

conky.text = [[
${color2}NixOS${color} $kernel
${color2}${font Iosevka Nerd Font:bold:size=12}CPU${font}${color}
${color1}${hr 1}${color}
${color3}Usage:${color} $cpu% ${alignr}${color3}Temp:${color} ${exec sensors 2>/dev/null | awk '/Package id 0:/{gsub(/[+°C]/,""); print $4}'}°C
${cpugraph cpu0 25,180 888888 000000}
${color2}${font Iosevka Nerd Font:bold:size=12}MEMORY${font}${color}
${color1}${hr 1}${color}
${color3}RAM:${color} $memperc% ${membar}
${color3}Used:${color} $mem / $memmax
${color2}${font Iosevka Nerd Font:bold:size=12}DISK${font}${color}
${color1}${hr 1}${color}
${color3}Root:${color} ${fs_used_perc /}% ${fs_bar /}
${color2}${font Iosevka Nerd Font:bold:size=12}NVIDIA${font}${color}
${color1}${hr 1}${color}
${color3}Usage:${color} ${exec nvidia-smi --query-gpu=utilization.gpu --format=csv,noheader,nounits}% ${alignr}${color3}Temp:${color} ${exec nvidia-smi --query-gpu=temperature.gpu --format=csv,noheader}°C
${color3}VRAM:${color} ${exec nvidia-smi --query-gpu=memory.used --format=csv,noheader} / ${exec nvidia-smi --query-gpu=memory.total --format=csv,noheader}
${color2}${font Iosevka Nerd Font:bold:size=12}RADEON${font}${color}
${color1}${hr 1}${color}
${color3}Usage:${color} ${exec cat /sys/class/drm/card1/device/gpu_busy_percent 2>/dev/null || cat /sys/class/drm/card0/device/gpu_busy_percent 2>/dev/null || echo N/A}% ${alignr}${color3}Temp:${color} ${exec sensors amdgpu-pci-* 2>/dev/null | awk '/edge:/{gsub(/[+°C]/,""); print $2; exit}'}°C
]]